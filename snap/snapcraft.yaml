name: nos
base: core22
version: '1.1.4'
summary: Beautiful Nostr CLI Client
description: |
  A beautiful command-line client for posting to Nostr, built with Go and Charm.sh.
  
  Features:
  - Secure key storage using system keyring
  - Beautiful terminal UI with Charm.sh
  - Posts to multiple relays for reliability
  - Simple one-command posting
  - Customizable relay management
  - Account switching with complete reset
  - Interactive menu-driven interface
  - Post verification across relays

grade: stable
confinement: strict

architectures:
  - build-on: amd64
  - build-on: arm64
  - build-on: armhf

apps:
  nos:
    command: bin/nos
    plugs:
      - network
      - network-bind
      - home
      - password-manager-service

parts:
  nos:
    plugin: go
    source: .
    go-channel: "1.25/stable"
    build-snaps:
      - go/1.25/stable
    override-build: |
      export CGO_ENABLED=0
      go build -ldflags="-s -w" -o $SNAPCRAFT_PART_INSTALL/bin/nos .