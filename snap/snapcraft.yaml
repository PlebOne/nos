name: nos
base: core22
version: '1.1.9'
summary: Beautiful Nostr CLI Client
description: |
  A beautiful command-line client for posting to Nostr, built with Go and Charm.sh.
  
  Features:
  - Secure key storage using system keyring
  - Beautiful terminal UI with Charm.sh
  - Posts to multiple relays for reliability
  - Simple one-command posting
  - Customizable relay management
  - Account switching with complete reset
  - Interactive menu-driven interface
  - Post verification across relays

grade: stable
confinement: strict

architectures:
  - build-on: amd64
  - build-on: arm64
  - build-on: armhf

apps:
  nos:
    command: bin/nos
    plugs:
      - network
      - network-bind
      - home
      - password-manager-service

parts:
  nos:
    plugin: nil
    source: .
    build-packages:
      - wget
      - tar
    override-build: |
      # Install Go manually to support go.mod version
      export GOVERSION=1.24.1
      wget -q https://go.dev/dl/go${GOVERSION}.linux-amd64.tar.gz
      tar -C /usr/local -xzf go${GOVERSION}.linux-amd64.tar.gz
      export PATH=/usr/local/go/bin:$PATH
      export CGO_ENABLED=0
      
      # Build the application
      cd $SNAPCRAFT_PART_SRC
      go build -ldflags="-s -w" -o $SNAPCRAFT_PART_INSTALL/bin/nos .